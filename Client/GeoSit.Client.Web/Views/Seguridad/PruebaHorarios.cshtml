@model GeoSit.Client.Web.Models.SeguridadModel
@{
    ViewBag.Title = "Horarios";
}
@section styles
{
    <link href="../Content/jquery.jscrollpane.css" rel="stylesheet" />
    <link href="../Content/jquery-ui.css" rel="stylesheet" />

    <link href="../Content/dataTables.bootstrap.css" rel="stylesheet" />
    <link href="../Content/Seguridad.css" rel="stylesheet" />
}

@using (Html.BeginForm("SetUsuarios_Save", "Seguridad", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { id = "form", role = "form", novalidate = "" }))
{  @Html.AntiForgeryToken()
    var MensajeSalida = Model.Mensaje;


    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">

        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title col-lg-10 col-xs-10 col-sm-10 col-md-10" id="myModalLabel" style="color:#000000">Parámetros Generales</h4>
                    <img id="btnGrabar" class="" title="Grabar" src="../Content/images/Seguridad/icons/blue/32/save.desactivado.png" style="cursor:pointer;">&ensp;&ensp;
                    <img id="btnCerrar" title="Cerrar" src="../Content/images/Seguridad/icons/blue/32/cancelar.png" style="cursor:pointer;">
                </div>
                <div class="modal-body">
                    @{

    if (MensajeSalida != null && MensajeSalida != "")
    {
        if (MensajeSalida == "OK")
        {

            <div id="MensajeSalida" class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Atención!</strong> La actualización de los datos, se ha realizado de forma satisfactoria
            </div>
        }
        else
        {
            <div id="MensajeSalida" class="alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Atención!</strong> Se ha producido un error al realizar la actualización de los datos.
            </div>
        }


    }

                    }

                    <div class="search " style="color:black">

                        <table class="mapviewer-layer-table">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="input-group col-lg-11 col-xs-11 col-sm-11 col-md-11 col-md-10 escala_fuente_14 text-info text-left">
                                            Filtrar
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="100%" align="center">
                                        <div class="input-group col-lg-10 col-xs-10 col-sm-10 col-md-10">
                                            <input type="text" value="" class="form-control" id="Filtrar" name="Filtrar">
                                            <span class="input-group-addon cursor-pointer"><span id="clearSearch" class="glyphicon glyphicon-trash" aria-hidden="true"></span></span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="100%" align="center" class="input-group col-lg-10 col-xs-10 col-sm-10 col-md-10">
                                        <div class="text-info small">
                                            Mostrar sólo usuarios activos
                                            <img id="swich_Cambio_Clave" title="Activar" style="cursor:pointer" class="escala_img" src="../Content/images/Seguridad/icons/blue/32/activo.png" />
                                        </div>
                                </tr>
                            </tbody>
                        </table>

                    </div>

                    @*Listado*@


                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Lista de Usuarios
                        </div>
                        <div class="panel-body" style="color:black">
                            <div class="col-xs-11">
                                <table id="Grilla_usuarios" class="table table-striped table-bordered table-responsive" cellspacing="0" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th class="no-sort" width="5%"></th>
                                            <th width="25%">Usuario</th>
                                            <th width="30%">Apellido</th>
                                            <th width="40%">Nombre</th>
                                        </tr>
                                    </thead>
                                    <tbody>


                                        @{
    foreach (var item in ViewBag.listaUsuarios)
    {
        string Usuario = item.Login;
        string Apellido = item.Apellido;
        string Nombre = item.Nombre;

        {

            <tr>
                <td>
                    <input type="radio" aria-label="..." id="Usuario1" name="Usuario">
                </td>
                <td>@Usuario</td>
                <td>@Apellido</td>
                <td>@Nombre</td>
            </tr>

            continue;
        };

    }
                                        };

                                    </tbody>
                                </table>
                            </div>
                            <div class="col-xs-1" id="plantilla-controls">
                                <dl>
                                    <dt><span class="glyphicon glyphicon-2x glyphicon-plus-sign btn_abilitado " aria-hidden="true" style="font-size:20px;" id="btn_Agregar"></span></dt>
                                    <dt><span class="glyphicon glyphicon-2x glyphicon-minus-sign btn_desabilitado" aria-hidden="true" style="font-size:20px;" id="btn_Eliminar"></span></dt>
                                    <dt><span class="glyphicon glyphicon-2x glyphicon-pencil btn_desabilitado" aria-hidden="true" style="font-size:20px;" id="btn_Modificar"></span></dt>

                                </dl>
                            </div>
                        </div>
                    </div>

                    @*Fin de listado*@

                    <div id="accordion">
                        <div class="panel-group panel-primary">
                            <div class="panel-heading panel-desactivado" style="height:40px;">
                                <div class="col-lg-11 col-xs-11 col-sm-11 col-md-11 ">
                                    Detalle de Usuarios
                                </div>
                                <div class="col-lg-1 col-xs-1 col-sm-1 col-md-1 text-right ">
                                    <span id="Flecha_Detalle_Usuario" class="glyphicon glyphicon-triangle-bottom flecha-desactivada"></span>

                                </div>
                            </div>
                            <div id="accordion_panel_0" class="panel-collapse collapse" aria-expanded="true" style="border: solid; border-width: 1px; border-color: #a5a5a5; color: #000000">
                                <div class="panel-body">

                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * Usuario:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.TextBoxFor(model => model.Usuarios.Login, new { @class = "form-control", @Value = ViewBag.Login })
                                    </div>

                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * Nombres:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.TextBoxFor(model => model.Usuarios.Nombre, new { @class = "form-control", @Value = ViewBag.Nombre })
                                    </div>

                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * Apellidos:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.TextBoxFor(model => model.Usuarios.Apellido, new { @class = "form-control", @Value = ViewBag.Apellido })
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * E-Mail:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.TextBoxFor(model => model.Usuarios.Mail, new { @class = "form-control", @Value = ViewBag.Mail })
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        Sector:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.TextBoxFor(model => model.Usuarios.Sector, new { @class = "form-control", @Value = ViewBag.Sector })
                                    </div>

                                    <div id="div_datos_usuarios">
                                        <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                            * Tipo y N° de Documento:
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                            @Html.TextBoxFor(model => model.Usuarios.Nro_doc, new { @class = "form-control", @Value = ViewBag.Nro_doc })
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                            Domicilio:
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                            @Html.TextBoxFor(model => model.Usuarios.Domicilio, new { @class = "form-control", @Value = ViewBag.Domicilio })
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                            Fecha de Alta:
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                            @Html.TextBoxFor(model => model.Usuarios.Fecha_alta, new { @class = "form-control", @style = "width:40%;", @disabled = "true", @Value = ViewBag.Fecha_alta })
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                            Fecha de Modificación:
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                            @Html.TextBoxFor(model => model.Usuarios.Fecha_modificacion, new { @class = "form-control", @style = "width:40%;", @disabled = "true", @Value = ViewBag.Fecha_modificacion })
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                            Fecha de Baja:
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                            @Html.TextBoxFor(model => model.Usuarios.Fecha_baja, new { @class = "form-control", @style = "width:40%;", @disabled = "true", @Value = ViewBag.Fecha_baja })
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                            Deshabilitar Cuenta:
                                        </div>
                                        <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                            <img id="swich_Cuenta" title="Activar" style="cursor:pointer" class=" pull-left escala_img" src="../Content/images/Seguridad/icons/blue/32/activo.png" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        @*Detalle de Contraseña*@
                        <div class="panel-group panel-primary" id="panel_clave">
                            <div class="panel-heading panel-desactivado" style="height:40px;">
                                <div class="col-lg-11 col-xs-11 col-sm-11 col-md-11 ">
                                    Detalle de la Contraseña
                                </div>
                                <div class="col-lg-1 col-xs-1 col-sm-1 col-md-1 text-right ">
                                    <span id="Flecha_Detalle_Clave" class="glyphicon glyphicon-triangle-bottom flecha-desactivada"></span>

                                </div>
                            </div>
                            <div id="accordion_panel_1" class="panel-collapse collapse" aria-expanded="true" style="border: solid; border-width: 1px; border-color: #a5a5a5; color: #000000">
                                <div class="panel-body">
                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * Nueva Contraseña:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.PasswordFor(model => model.Usuarios.Login, new { @class = "form-control", @Value = ViewBag.Login })
                                    </div>

                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * Confirmar Contraseña:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.PasswordFor(model => model.Usuarios.Nombre, new { @class = "form-control", @Value = ViewBag.Nombre })
                                    </div>

                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        * Ultima Modificación:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        @Html.TextBoxFor(model => model.Usuarios.Nombre, new { @class = "form-control", @style = "width:40%;", @disabled = "true", @Value = ViewBag.Ultima_Modificacion })
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-4 col-xs-4 col-sm-4 col-md-4">
                                        Cambiar la contraseña al iniciar la aplicación:
                                    </div>
                                    <div class="panel-body escala_fuente_11 col-lg-8 col-xs-8 col-sm-8 col-md-8">
                                        <img id="swich_Cambio_Clave" title="Activar" style="cursor:pointer" class=" pull-left escala_img" src="../Content/images/Seguridad/icons/blue/32/activo.png" />
                                    </div>

                                </div>
                            </div>
                        </div>

                        @*PERFIL SIN ACTIVE DIRECTORY*@
                        <div class="panel-group panel-primary" id="div_Perfil_0">
                            <div class="panel-heading panel-desactivado" style="height:40px;">
                                <div class="col-lg-11 col-xs-11 col-sm-11 col-md-11 ">
                                    Perfil
                                </div>
                                <div class="col-lg-1 col-xs-1 col-sm-1 col-md-1 text-right ">
                                    <span id="Flecha_Detalle_Perfil" class="glyphicon glyphicon-triangle-bottom flecha-desactivada"></span>

                                </div>
                            </div>
                            <div id="accordion_panel_2" class="panel-collapse collapse" aria-expanded="true" style="border: solid; border-width: 1px; border-color: #a5a5a5; color: #000000">
                                <div class="panel-body">

                                    <div class="col-xs-12" style="height:200px">

                                        <table id="Perfiles" class="table table-striped table-bordered table-responsive" cellspacing="0" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th width="51%">Perfiles</th>
                                                    <th width="9%">Estado</th>
                                                    <th width="40%" colspan="2">Horario</th>
                                                </tr>
                                            </thead>
                                            <tbody class="grilla_Scroll">
                                                @{
    foreach (var item in ViewBag.listaPerfiles)
    {
        long Id_Perfil = item.Id_Perfil;
        string Nombre_Perfil = item.Nombre;
        long Id_Horario = item.Id_Horario;
        string Horario = item.Horario.Descripcion;

        {
            <tr>
                @Html.HiddenFor(model => model.Perfiles.Id_Perfil, new { @Value = Id_Perfil })
                @Html.HiddenFor(model => model.Perfiles.Id_Horario, new { @Value = Id_Horario })
                <td width="50%">@Nombre_Perfil</td>
                <td width="11%" align="center"><img id="swich_Cambio_Clave" title="Activar" style="cursor:pointer" class="escala_img" src="../Content/images/Seguridad/icons/blue/24/activo.png" /></td>
                <td width="34%">@Horario</td>
                <td width="5%" align="center"><span id="Calendario_Perfil" class="glyphicon glyphicon-calendar" style="margin-left: 3px; color: black; cursor: pointer"></span></td>
            </tr>
            continue;
        };

    }
                                                }

                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>


                        @*PERFIL CON ACTIVE DIRECTORY*@
                        <div class="panel-group panel-primary" id="div_Perfil_1">
                            <div class="panel-heading panel-desactivado" style="height:40px;">
                                <div class="col-lg-11 col-xs-11 col-sm-11 col-md-11 ">
                                    Perfil
                                </div>
                                <div class="col-lg-1 col-xs-1 col-sm-1 col-md-1 text-right ">
                                    <span id="Flecha_Detalle_Perfil_2" class="glyphicon glyphicon-triangle-bottom flecha-desactivada"></span>

                                </div>
                            </div>
                            <div id="accordion_panel_3" class="panel-collapse collapse" aria-expanded="true" style="border: solid; border-width: 1px; border-color: #a5a5a5; color: #000000">
                                <div class="panel-body">

                                    <div class="col-xs-12" style="height:350px">

                                        <table class="mapviewer-layer-table">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="input-group col-lg-11 col-xs-11 col-sm-11 col-md-11 escala_fuente_14 text-info text-left">
                                                            Filtrar
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="100%" align="center">
                                                        <div class="input-group col-lg-11 col-xs-11 col-sm-11 col-md-11">
                                                            <input type="text" value="" class="form-control" id="Filtrar_perfil" name="Filtrar_perfil">
                                                            <span class="input-group-addon cursor-pointer"><span id="clearSearchPerfil" class="glyphicon glyphicon-trash" aria-hidden="true"></span></span>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <hr />

                                        <table class="mapviewer-layer-table">
                                            <tbody>
                                                <tr>
                                                    <td width="100%" align="center">
                                                        <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 text-info text-left">
                                                            Perfiles Disponibles
                                                        </div>
                                                        <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 text-info text-left">
                                                            Perfiles Asociados
                                                        </div>
                                                        <div id="div_perfiles_disponibles">
                                                            <ul id="lista_perfiles_disponibles" class="connectedSortable escala_fuente_10">
                                                                <li class="ui-state-default perfiles-disponibles" id="1" title="Perfil 1">Perfil 1</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="2" title="Perfil 2">Perfil 2</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="3" title="Perfil 3">Perfil 3</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="4" title="Perfil 4">Perfil 4</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="5" title="Perfil 5">Perfil 5</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="6" title="Perfil 6">Perfil 6</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="7" title="Perfil 7">Perfil 7</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="8" title="Perfil 8">Perfil 8</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="9" title="Perfil 9">Perfil 9</li>
                                                                <li class="ui-state-default perfiles-disponibles" id="10" title="Perfil 10">Perfil 10</li>
                                                            </ul>
                                                        </div>
                                                        <div id="div_perfiles_asociados">
                                                            <ul id="lista_perfiles_asociados" class="connectedSortable escala_fuente_10"></ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>


                                    </div>

                                </div>
                            </div>
                        </div>

                        @*AREAS*@
                        <div class="panel-group panel-primary" id="div_Distrito">
                            <div class="panel-heading panel-desactivado" style="height:40px;">
                                <div class="col-lg-11 col-xs-11 col-sm-11 col-md-11 ">
                                    Areas
                                </div>
                                <div class="col-lg-1 col-xs-1 col-sm-1 col-md-1 text-right ">
                                    <span id="Flecha_Detalle_Distrito" class="glyphicon glyphicon-triangle-bottom flecha-desactivada"></span>

                                </div>
                            </div>
                            <div id="accordion_panel_4" class="panel-collapse collapse" aria-expanded="true" style="border: solid; border-width: 1px; border-color: #a5a5a5; color: #000000">
                                <div class="panel-body">

                                    <div class="col-xs-12" style="height:350px">

                                        <table class="mapviewer-layer-table">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="input-group col-lg-11 col-xs-11 col-sm-11 col-md-11 escala_fuente_14 text-info text-left">
                                                            Filtrar
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="100%" align="center">
                                                        <div class="input-group col-lg-11 col-xs-11 col-sm-11 col-md-11">
                                                            <input type="text" value="" class="form-control" id="Filtrar_distrito" name="Filtrar_distrito">
                                                            <span class="input-group-addon cursor-pointer"><span id="clearSearchDistrito" class="glyphicon glyphicon-trash" aria-hidden="true"></span></span>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <hr />

                                        <table class="mapviewer-layer-table">
                                            <tbody>
                                                <tr>
                                                    <td width="100%" align="center">
                                                        <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 text-info text-left">
                                                            Distritos Disponibles
                                                        </div>
                                                        <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 text-info text-left">
                                                            Distritos Asociados
                                                        </div>
                                                        <div id="div_distritos_disponibles">
                                                            <ul id="lista_distritos_disponibles" class="connectedSortable vertical escala_fuente_10">
                                                                <li id="1" title="Region 1" class="ui-state-default distritos-disponibles">Región 1</li>
                                                                <li id="2" title="Region 2" class="ui-state-default distritos-disponibles">Región 2</li>
                                                                <li id="3" title="Region 3" class="ui-state-default distritos-disponibles">Región 3</li>
                                                                <li id="4" title="Region 4" class="ui-state-default distritos-disponibles">
                                                                    Región 4
                                                                    <ol id="sub_lista_distritos_disponibles_4" class="sub_lista_distritos_disponibles">
                                                                        <li id="4-1" title="Distrito 1" class="sub-items distritos-disponibles">Distrito 1</li>
                                                                        <li id="4-2" title="Distrito 1" class="sub-items distritos-disponibles">Distrito 2</li>
                                                                        <li id="4-3" title="Distrito 1" class="sub-items distritos-disponibles">Distrito 3</li>
                                                                        <li id="4-4" title="Distrito 1" class="sub-items distritos-disponibles">Distrito 4</li>
                                                                    </ol>
                                                                </li>
                                                                <li id="5" title="Region 1" class="ui-state-default distritos-disponibles">Región 5</li>
                                                                <li id="6" title="Region 1" class="ui-state-default distritos-disponibles">Región 6</li>
                                                                <li id="7" title="Region 1" class="ui-state-default distritos-disponibles">Región 7</li>
                                                                <li id="8" title="Region 1" class="ui-state-default distritos-disponibles">Región 8</li>
                                                            </ul>
                                                            @*<ol id="lista_distritos_disponibles" class="serialization vertical">
                                                                    <li data-id="0" data-name="Item 1" class="ui-state-default">Item 1</li>
                                                                    <li data-id="1" data-name="Item 2" class="ui-state-default">Item 2</li>
                                                                    <li data-id="2" data-name="Item 3" class="ui-state-default">Item 3</li>
                                                                    <li data-id="3" data-name="Item 4" class="ui-state-default">
                                                                        Item 4
                                                                        <ol>
                                                                            <li data-id="3-2" data-name="Item 3.3" class="sub-items">Item 3.3</li>
                                                                            <li data-id="3-3" data-name="Item 3.4" class="sub-items">Item 3.4</li>
                                                                            <li data-id="3-4" data-name="Item 3.5" class="sub-items">Item 3.5</li>
                                                                            <li data-id="3-5" data-name="Item 3.6" class="sub-items">Item 3.6</li>
                                                                        </ol>
                                                                    </li>
                                                                    <li data-id="3-0" data-name="Item 3.1" class="ui-state-default">Item 3.1</li>
                                                                    <li data-id="3" data-name="Item 4" class="ui-state-default">Item 4</li>
                                                                    <li data-id="4" data-name="Item 5" class="ui-state-default">Item 5</li>
                                                                    <li data-id="5" data-name="Item 6" class="ui-state-default">Item 6</li>
                                                                </ol>*@
                                                        </div>
                                                        <div id="div_distritos_asociados">
                                                            <ul id="lista_distritos_asociados" class="connectedSortable vertical escala_fuente_10"></ul>
                                                            @*<ol id="lista_distritos_asociados"  class="serialization vertical">

                                                                </ol>*@
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
}





@section scripts
{

    <script src="../Scripts/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script src="../Scripts/bootstrap.js"></script>
    <script src="../Scripts/jquery-ui.js"></script>
    <script src="../Scripts/jquery.dataTables.js"></script>
    @*<script src="../Scripts/jquery-sortable.js"></script>*@

    <script>


        $(document).ready(function () {

            $('#Grilla_usuarios').dataTable({
                "scrollY": "200px",
                "scrollCollapse": true,
                "paging": false,
                "searching": true,
                "bInfo": false,
                "aaSorting": [[1, 'asc']],
                "language": {
                    "url": "../Scripts/dataTables.spanish.txt"
                },
                "columnDefs": [{
                    "targets": 'no-sort',
                    "orderable": false,
                }]
            });


            $('#Filtrar').on('keyup click', function () {
                FiltrarGrilla();
            });
            $('#Filtrar_perfil').on('keyup click', function () {
                FiltrarPerfiles();
            });
            $('#Filtrar_distrito').on('keyup click', function () {
                FiltrarDistritos();
            });


            if ('@ViewBag.LimitesAcceso' == '1') {
                $("#accordion_panel_0").addClass("in");
            } else {
                $("#accordion_panel_0").removeClass("in");
            }

            if ('@ViewBag.LimitesClaves' == '1') {
                $("#accordion_panel_1").addClass("in");
            } else {
                $("#accordion_panel_1").removeClass("in");
            }

            $("#Flecha_Detalle_Usuario").click(function () {
                if ($("#accordion_panel_0").hasClass("in") == false) {
                    $("#accordion_panel_0").addClass("in");
                    $("#Flecha_Detalle_Usuario").removeClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Usuario").addClass("glyphicon-triangle-top");

                } else {
                    $("#accordion_panel_0").removeClass("in");
                    $("#Flecha_Detalle_Usuario").addClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Usuario").removeClass("glyphicon-triangle-top");
                }
            });
            $("#Flecha_Detalle_Clave").click(function () {
                if ($("#accordion_panel_1").hasClass("in") == false) {
                    $("#accordion_panel_1").addClass("in");
                    $("#Flecha_Detalle_Clave").removeClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Clave").addClass("glyphicon-triangle-top");

                } else {
                    $("#accordion_panel_1").removeClass("in");
                    $("#Flecha_Detalle_Clave").addClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Clave").removeClass("glyphicon-triangle-top");
                }
            });
            $("#Flecha_Detalle_Perfil").click(function () {
                if ($("#accordion_panel_2").hasClass("in") == false) {
                    $("#accordion_panel_2").addClass("in");
                    $("#Flecha_Detalle_Perfil").removeClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Perfil").addClass("glyphicon-triangle-top");
                    $('#Grilla_perfiles').DataTable().columns.adjust().draw();
                } else {
                    $("#accordion_panel_2").removeClass("in");
                    $("#Flecha_Detalle_Perfil").addClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Perfil").removeClass("glyphicon-triangle-top");
                }
            });

            $("#Flecha_Detalle_Perfil_2").click(function () {
                if ($("#accordion_panel_3").hasClass("in") == false) {
                    $("#accordion_panel_3").addClass("in");
                    $("#Flecha_Detalle_Perfil_2").removeClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Perfil_2").addClass("glyphicon-triangle-top");
                    //$('#Grilla_perfiles').DataTable().columns.adjust().draw();
                } else {
                    $("#accordion_panel_3").removeClass("in");
                    $("#Flecha_Detalle_Perfil_2").addClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Perfil_2").removeClass("glyphicon-triangle-top");
                }
            });

            $("#Flecha_Detalle_Distrito").click(function () {
                if ($("#accordion_panel_4").hasClass("in") == false) {
                    $("#accordion_panel_4").addClass("in");
                    $("#Flecha_Detalle_Distrito").removeClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Distrito").addClass("glyphicon-triangle-top");
                    //$('#Grilla_perfiles').DataTable().columns.adjust().draw();
                } else {
                    $("#accordion_panel_4").removeClass("in");
                    $("#Flecha_Detalle_Distrito").addClass("glyphicon-triangle-bottom");
                    $("#Flecha_Detalle_Distrito").removeClass("glyphicon-triangle-top");
                }
            });



            $("#btnGrabar").click(function () {

                //$("#form").submit()
            });

            $("#btnCerrar").click(function () {
                $("#myModal").modal('hide');
                window.location.href = "@Url.Action("index", "Home")"
            });


            setTimeout(function () {
                $("#MensajeSalida").effect("fade", "", 1000);
            }, 4000);

            if ('@ViewBag.Active_Directory' == '1') {
                $("#div_datos_usuarios").css("display", "none");
                $("#panel_clave").css("display", "none");
                $("#div_Perfil_0").css("display", "none");
                $("#div_Perfil_1").css("display", "");
                $("#div_Distrito").css("display", "");

            } else {
                $("#div_datos_usuarios").css("display", "");
                $("#panel_clave").css("display", "");
                $("#div_Perfil_0").css("display", "");
                $("#div_Perfil_1").css("display", "none");
                $("#div_Distrito").css("display", "none");
            }



            $(function () {
                $("#lista_perfiles_disponibles, #lista_perfiles_asociados").sortable({
                    connectWith: ".connectedSortable"
                }).disableSelection();
            });

            $("#clearSearchPerfil").click(function () {
                $("#Filtrar_perfil").val("");
                FiltrarPerfiles();
            })
            $("#clearSearchDistrito").click(function () {
                $("#Filtrar_distrito").val("");
                FiltrarDistritos();
            })

            $(function () {
                $("#lista_distritos_disponibles, #lista_distritos_asociados, #sub_lista_distritos_disponibles .sub_lista_distritos_disponibles").sortable({
                    connectWith: ".connectedSortable"
                }).disableSelection();
            });
            $(function () {
                $(".sub_lista_distritos_disponibles").sortable({
                    connectWith: ".connectedSortable"
                }).disableSelection();
            });

            //var group = $("ol.serialization").sortable({
            //    group: 'serialization',
            //    delay: 500,
            //    onDrop: function (item, container, _super) {
            //        var data = group.sortable("serialize").get();

            //        var jsonString = JSON.stringify(data, null, ' ');

            //        $('#serialize_output2').text(jsonString);
            //        _super(item, container)
            //    }
            //})

            $("#btn_Agregar").click(function () {

                $(".flecha-desactivada").removeClass("flecha-desactivada");
                $(".panel-desactivado").removeClass("panel-desactivado");

            })


            $("#myModal").modal('show');


        })


        function FiltrarGrilla() {
            $('#Grilla_usuarios').DataTable().search(
                $('#Filtrar').val()
            ).draw();
        }

        function FiltrarPerfiles() {
            var textoFiltro = $("#Filtrar_perfil").val().toLowerCase().replace(/\s/g, "-");
            if (textoFiltro == '') {
                $('#lista_perfiles_disponibles li.perfiles-disponibles').fadeIn('slow').removeClass('hidden');
            }
            else {
                $('#lista_perfiles_disponibles li.perfiles-disponibles').each(function () {


                    var id_perfil = $(this).prop("id").toLowerCase().replace(/\s/g, "-");
                    var texto_perfil = $(this).prop("title").toLowerCase().replace(/\s/g, "-");

                    var nFiltro = texto_perfil.indexOf(textoFiltro);

                    if (nFiltro != 0) {
                        $(this).fadeOut('normal').addClass('hidden');
                    } else {
                        $(this).fadeIn('slow').removeClass('hidden');
                    }

                });
            }
            return false;
        }

        function FiltrarDistritos() {
            var textoFiltro = $("#Filtrar_distrito").val().toLowerCase().replace(/\s/g, "-");
            if (textoFiltro == '') {
                $('#lista_distritos_disponibles li.distritos-disponibles').fadeIn('slow').removeClass('hidden');
                $('#lista_distritos_disponibles ol.distritos-disponibles').fadeIn('slow').removeClass('hidden');
            }
            else {

                $('#lista_distritos_disponibles li.distritos-disponibles').each(function () {

                    var id_distrito = $(this).prop("id").toLowerCase().replace(/\s/g, "-");
                    var texto_distrito = $(this).prop("title").toLowerCase().replace(/\s/g, "-");

                    var nFiltro = texto_distrito.indexOf(textoFiltro);


                    var Cantidad_ol = 0;
                    if (nFiltro != 0) {

                        $('#sub_lista_distritos_disponibles_' + id_distrito + ' li.distritos-disponibles').each(function () {
                            var texto_distrito = $(this).prop("title").toLowerCase().replace(/\s/g, "-");

                            var nFiltro = texto_distrito.indexOf(textoFiltro);
                            if (nFiltro != 0) {
                                $(this).fadeOut('normal').addClass('hidden');
                            } else {
                                $(this).fadeIn('slow').removeClass('hidden');
                                Cantidad_ol = 1;
                            }
                        });

                        if (Cantidad_ol == 0) {
                            $(this).fadeOut('normal').addClass('hidden');
                        }

                    } else {

                        $('#sub_lista_distritos_disponibles_' + id_distrito + ' li.distritos-disponibles').each(function () {
                            var texto_distrito = $(this).prop("title").toLowerCase().replace(/\s/g, "-");

                            var nFiltro = texto_distrito.indexOf(textoFiltro);
                            if (nFiltro != 0) {
                                $(this).fadeOut('normal').addClass('hidden');
                            } else {
                                $(this).fadeIn('slow').removeClass('hidden');
                                Cantidad_ol = 1;
                            }
                        });

                        if (Cantidad_ol == 0) {
                            $(this).fadeIn('slow').removeClass('hidden');
                        }

                    }

                });
            }
            return false;
        }




    </script>
}


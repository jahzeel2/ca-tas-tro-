@model GeoSit.Client.Web.Models.ProfesionModel

<div class="modal fade theme_new" id="modal-window-profesion" tabindex="-1" data-backdrop="false" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="scroll-content">
                <div class="modal-header">
                    <h3 class="modal-title">Datos de la Profesi&oacute;n</h3>
                    <span class="fa fa-close fa-2x white cursor-pointer pull-right" data-dismiss="modal" aria-label="Cerrar" title="Cerrar"></span>
                </div>
                <div class="modal-body profesion-body">
                    <div class="body-content">
                        <div class="panel-body profesion-datos">
                            <form class="form-horizontal">
                                @Html.HiddenFor(model => model.PersonaId)
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Profesi&oacute;n</label>
                                    <div class="col-sm-8">
                                        @Html.DropDownListFor(model => model.TipoProfesionId, (SelectList)ViewData["TiposProfesion"], new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Nº de Matr&iacute;cula</label>
                                    <div class="col-sm-8">
                                        @Html.TextBoxFor(model => model.Matricula, new { @class = "form-control", @maxlength = "50" })
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-xs-4 pull-right">
                        <span role="button" title="Aceptar" class="fa fa-check-circle fa-2x black cursor-pointer"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const modal = $("#modal-window-profesion");
    const saveProfesion = function () {
        const tipoProfesion = {
            TipoProfesion: {
                TipoProfesionId: Number($("#TipoProfesionId", modal).val()),
                Descripcion: $("#TipoProfesionId :selected", modal).text()
            }
        }
        const profesion = Object.assign(tipoProfesion, $("form", modal).serializeObject());
        $(document).trigger({ type: 'profesionGuardada', profesion });
        modal.modal("hide");
    }
    $("form", modal).on("submit", function (evt) {
        evt.stopPropagation();
        saveProfesion();
        return false;
    });
    modal.one("shown.bs.modal", hideLoading).modal("show");
    $("[role=button]", modal).one("click", () => $("form", modal).submit());
</script>